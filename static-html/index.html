<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hello World - Changeur de Couleur avec Boule Disco</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f0f0f0;
            font-family: 'Arial', sans-serif;
            transition: background-color 0.5s ease;
            cursor: pointer;
            overflow: hidden;
            position: relative;
            perspective: 1000px;
        }
        
        h1 {
            font-size: 4rem;
            color: #333;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            position: relative;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            z-index: 1;
        }
        
        h1::before, h1::after {
            content: attr(data-text);
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            color: transparent;
            opacity: 0;
            z-index: -1;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        
        h1::before {
            text-shadow: -3px 0 #ff3e3e;
            clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%);
        }
        
        h1::after {
            text-shadow: 3px 0 #4ca2ff;
            clip-path: polygon(0 55%, 100% 55%, 100% 100%, 0 100%);
        }
        
        h1:hover {
            transform: rotate(5deg) scale(1.2);
            color: transparent;
        }
        
        h1:hover::before, h1:hover::after {
            opacity: 1;
            color: #333;
            transform: translateX(10px);
        }
        
        h1:hover::before {
            transform: translateX(-10px) translateY(-5px);
        }
        
        h1:hover::after {
            transform: translateX(10px) translateY(5px);
        }
        
        .particle {
            position: absolute;
            width: 6px;
            height: 6px;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
        }
        
        /* Styles pour la boule disco */
        .disco-container {
            position: absolute;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            perspective: 1200px;
            z-index: 10;
        }
        
        .disco-suspension {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 30px;
            background: linear-gradient(to bottom, #333, #999);
        }
        
        .disco-ball-scene {
            width: 150px;
            height: 150px;
            position: relative;
            transform-style: preserve-3d;
            animation: rotateDiscoBall 10s linear infinite;
        }
        
        @keyframes rotateDiscoBall {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }
        
        .disco-ball {
            position: absolute;
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: #333;
            transform-style: preserve-3d;
            overflow: visible;
            box-shadow: 0 0 25px 5px rgba(255, 255, 255, 0.5);
        }
        
        .disco-facet {
            position: absolute;
            width: 12px;
            height: 12px;
            border: 1px solid rgba(255,255,255,0.3);
            transform-style: preserve-3d;
            box-shadow: 0 0 3px rgba(255,255,255,0.8);
            backface-visibility: visible;
        }
        
        /* Effet de highlight sur les facettes */
        .facet-highlight {
            position: absolute;
            width: 3px;
            height: 3px;
            background: rgba(255,255,255,0.9);
            top: 1px;
            left: 1px;
        }
        
        .disco-light {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            filter: blur(8px);
            opacity: 0;
            pointer-events: none;
            mix-blend-mode: lighten;
            z-index: 5;
        }
    </style>
</head>
<body>
    <div class="disco-container">
        <div class="disco-suspension"></div>
        <div class="disco-ball-scene">
            <div class="disco-ball" id="disco-ball"></div>
        </div>
    </div>
    
    <h1 id="hello" data-text="Hello World!">Hello World!</h1>

    <script>
        const discoPalette = [
            '#ff0000', '#ff4500', '#ff6347', '#ff7f50', // rouges/oranges
            '#ffd700', '#ffff00', '#f0e68c', '#ffffe0', // jaunes
            '#00ff00', '#32cd32', '#00fa9a', '#98fb98', // verts
            '#00ffff', '#00bfff', '#1e90ff', '#87cefa', // bleus clairs
            '#0000ff', '#0000cd', '#483d8b', '#4b0082', // bleus foncés/indigos
            '#9400d3', '#8a2be2', '#ba55d3', '#ff00ff'  // violets/magentas
        ];

        function getRandomColor() {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }
        
        function getRandomDiscoColor() {
            return discoPalette[Math.floor(Math.random() * discoPalette.length)];
        }

        let currentColor = "#f0f0f0"; // Couleur initiale
        let discoLights = []; // Pour stocker les références aux lumières

        // Changer la couleur du fond à chaque clic
        document.body.addEventListener('click', function() {
            currentColor = getRandomColor();
            document.body.style.backgroundColor = currentColor;
            updateDiscoLights(); // Met à jour les lumières de la boule disco
        });
        
        const title = document.getElementById('hello');
        
        title.addEventListener('mouseover', function(e) {
            for (let i = 0; i < 30; i++) {
                createParticle(e.clientX, e.clientY);
            }
        });
        
        function createParticle(x, y) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            document.body.appendChild(particle);
            
            particle.style.left = x + 'px';
            particle.style.top = y + 'px';
            
            particle.style.backgroundColor = getRandomDiscoColor();
            
            const angle = Math.random() * Math.PI * 2;
            const speed = Math.random() * 10 + 5;
            const size = Math.random() * 15 + 5;
            const duration = Math.random() * 1.5 + 1;
            
            particle.style.width = size + 'px';
            particle.style.height = size + 'px';
            
            const destinationX = x + Math.cos(angle) * 150 * speed;
            const destinationY = y + Math.sin(angle) * 150 * speed;
            
            particle.animate([
                { 
                    transform: 'translate(0, 0) scale(0)', 
                    opacity: 1 
                },
                { 
                    transform: `translate(${destinationX - x}px, ${destinationY - y}px) scale(1)`, 
                    opacity: 0 
                }
            ], {
                duration: duration * 1000,
                easing: 'cubic-bezier(0, .9, .57, 1)',
                fill: 'forwards'
            });
            
            setTimeout(() => {
                particle.remove();
            }, duration * 1000);
        }

        // Création d'une boule disco avec des facettes colorées
        function createDiscoBall() {
            const discoBall = document.getElementById('disco-ball');
            const radius = 75; // Rayon de la boule
            
            // Création de facettes carrées
            // Diviser la sphère en sections
            const facetRows = 15;
            const facetsPerRow = [];
            
            // Calculer combien de facettes par rangée pour une répartition plus naturelle
            for (let i = 0; i < facetRows; i++) {
                // Angle phi (vertical)
                const phi = (i / facetRows) * Math.PI;
                // Calculer la circonférence à cette latitude
                const circumference = Math.sin(phi) * 2 * Math.PI * radius;
                // Nombre de facettes basé sur la circonférence
                const numFacets = Math.max(1, Math.round(circumference / 15));
                facetsPerRow.push(numFacets);
            }
            
            // Créer les facettes
            for (let i = 0; i < facetRows; i++) {
                // Angle phi (vertical) de 0 à 180 degrés
                const phi = (i / facetRows) * Math.PI;
                const numFacets = facetsPerRow[i];
                
                for (let j = 0; j < numFacets; j++) {
                    // Angle theta (horizontal) de 0 à 360 degrés
                    const theta = (j / numFacets) * 2 * Math.PI;
                    
                    // Coordonnées sur la sphère
                    const x = radius * Math.sin(phi) * Math.cos(theta);
                    const y = radius * Math.cos(phi);
                    const z = radius * Math.sin(phi) * Math.sin(theta);
                    
                    // Créer la facette
                    const facet = document.createElement('div');
                    facet.className = 'disco-facet';
                    
                    // Ajouter une couleur aléatoire à la facette
                    const facetColor = getRandomDiscoColor();
                    facet.style.backgroundColor = facetColor;
                    
                    // Ajouter un effet de brillance basé sur la couleur
                    facet.style.background = `linear-gradient(135deg, ${facetColor}, ${adjustColorBrightness(facetColor, -30)})`;
                    
                    // Ajouter un petit point brillant à chaque facette
                    const highlight = document.createElement('div');
                    highlight.className = 'facet-highlight';
                    facet.appendChild(highlight);
                    
                    // Positionner et orienter la facette pour suivre la courbure
                    // Calculer la normale à la surface en ce point
                    const normalX = Math.sin(phi) * Math.cos(theta);
                    const normalY = Math.cos(phi);
                    const normalZ = Math.sin(phi) * Math.sin(theta);
                    
                    // Convertir la normale en rotations
                    const rotX = Math.atan2(-normalY, Math.sqrt(normalX * normalX + normalZ * normalZ)) * (180 / Math.PI);
                    const rotY = Math.atan2(normalZ, normalX) * (180 / Math.PI);
                    
                    // Position sur la sphère
                    facet.style.transform = `translate3d(${x + radius - 6}px, ${y + radius - 6}px, ${z}px) rotateY(${rotY}deg) rotateX(${rotX}deg)`;
                    
                    // Ajouter un effet de brillance aléatoire
                    facet.style.animation = `facetGlow ${1 + Math.random() * 4}s ease-in-out infinite`;
                    facet.style.animationDelay = `${Math.random() * 5}s`;
                    
                    discoBall.appendChild(facet);
                }
            }
        }
        
        // Fonction pour ajuster la luminosité d'une couleur
        function adjustColorBrightness(hex, percent) {
            // Convertir hex en rgb
            let r = parseInt(hex.slice(1, 3), 16);
            let g = parseInt(hex.slice(3, 5), 16);
            let b = parseInt(hex.slice(5, 7), 16);
            
            // Ajuster la luminosité
            r = Math.max(0, Math.min(255, r + percent));
            g = Math.max(0, Math.min(255, g + percent));
            b = Math.max(0, Math.min(255, b + percent));
            
            // Convertir en hex et retourner
            return '#' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
        }
        
        // Fonction pour créer les lumières projetées par la boule disco
        function createDiscoLights() {
            for (let i = 0; i < 60; i++) {
                const light = document.createElement('div');
                light.className = 'disco-light';
                document.body.appendChild(light);
                discoLights.push(light);
                
                // Position initiale et couleur
                updateDiscoLight(light, true);
                
                // Animation de la lumière
                animateDiscoLight(light);
            }
        }
        
        function updateDiscoLight(light, isNew = false) {
            // Position aléatoire sur l'écran
            const x = Math.random() * window.innerWidth;
            const y = Math.random() * window.innerHeight;
            light.style.left = x + 'px';
            light.style.top = y + 'px';
            
            // Taille aléatoire pour les lumières
            const size = 15 + Math.random() * 25;
            light.style.width = `${size}px`;
            light.style.height = `${size}px`;
            
            // Couleur de la lumière (aléatoire ou basée sur la couleur du fond)
            let lightColor;
            if (isNew || Math.random() > 0.7) {
                // Couleurs vives pour les lumières disco
                lightColor = getRandomDiscoColor();
            } else {
                // Parfois utiliser la couleur actuelle du fond
                lightColor = currentColor;
            }
            
            light.style.backgroundColor = lightColor;
            light.style.boxShadow = `0 0 20px 5px ${lightColor}`;
        }
        
        function animateDiscoLight(light) {
            const duration = 2000 + Math.random() * 3000;
            
            light.animate([
                { opacity: 0, transform: 'scale(0.8)' },
                { opacity: 0.7, transform: 'scale(1.2)' },
                { opacity: 0, transform: 'scale(0.8)' }
            ], {
                duration: duration,
                easing: 'ease-in-out',
                fill: 'forwards'
            });
            
            // Réinitialiser et animer à nouveau
            setTimeout(() => {
                updateDiscoLight(light);
                animateDiscoLight(light);
            }, duration);
        }
        
        function updateDiscoLights() {
            // Mettre à jour certaines lumières avec la nouvelle couleur de fond
            discoLights.forEach((light, index) => {
                if (index % 3 === 0) { // Mettre à jour environ un tiers des lumières
                    light.style.backgroundColor = currentColor;
                    light.style.boxShadow = `0 0 20px 5px ${currentColor}`;
                }
            });
        }
        
        // Ajouter des styles CSS pour l'animation des facettes
        function addFacetAnimation() {
            const styleElement = document.createElement('style');
            styleElement.innerHTML = `
                @keyframes facetGlow {
                    0%, 100% { 
                        opacity: 0.7;
                        box-shadow: 0 0 3px rgba(255,255,255,0.6);
                    }
                    50% { 
                        opacity: 1;
                        box-shadow: 0 0 8px rgba(255,255,255,0.9);
                    }
                }
            `;
            document.head.appendChild(styleElement);
        }
        
        // Initialisation
        addFacetAnimation();
        createDiscoBall();
        createDiscoLights();
    </script>
</body>
</html>
